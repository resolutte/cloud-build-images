steps:

- name: "gcr.io/cloud-builders/docker"
  entrypoint: "bash"
  args: ["-c", "docker login --username=resolutte --password=$$PASSWORD"]
  secretEnv: ["PASSWORD"]

- name: 'gcr.io/cloud-builders/docker'
  args:
  - 'build'
  - '--build-arg'
  - 'version=$SHORT_SHA'
  - '-t'
  - 'resolutte/php-fpm-5.6:latest'
  - '-t'
  - 'resolutte/php-fpm-5.6:$SHORT_SHA'
  - '.'

- name: 'gcr.io/cloud-builders/docker'
  args:
  - 'build'
  - '--build-arg'
  - 'version=$SHORT_SHA'
  - '-t'
  - 'resolutte/php-fpm-7.2:latest'
  - '-t'
  - 'resolutte/php-fpm-7.2:$SHORT_SHA'
  - '.'

- name: 'gcr.io/cloud-builders/docker'
  args:
  - 'build'
  - '--build-arg'
  - 'version=$SHORT_SHA'
  - '-t'
  - 'resolutte/php-fpm-7.3:latest'
  - '-t'
  - 'resolutte/php-fpm-7.3:$SHORT_SHA'
  - '.'

- name: 'gcr.io/cloud-builders/docker'
  args:
  - 'build'
  - '--build-arg'
  - 'version=$SHORT_SHA'
  - '-t'
  - 'resolutte/php-fpm-7.4:latest'
  - '-t'
  - 'resolutte/php-fpm-7.4:$SHORT_SHA'
  - '.'

images:
  - "resolutte/php-fpm-5.6:latest"
  - "resolutte/php-fpm-5.6:$SHORT_SHA"
  - "resolutte/php-fpm-7.2:latest"
  - "resolutte/php-fpm-7.2:$SHORT_SHA"
  - "resolutte/php-fpm-7.3:latest"
  - "resolutte/php-fpm-7.3:$SHORT_SHA"
  - "resolutte/php-fpm-7.4:latest"
  - "resolutte/php-fpm-7.4:$SHORT_SHA"

secrets:
  - kmsKeyName: "projects/$PROJECT_ID/locations/global/keyRings/Resolutte/cryptoKeys/docker-hub"
    secretEnv:
      PASSWORD: "$ uxwh[O �7�M��M)l��Y�f�D��1ן*��6 ��e�M���1=��	=}�?~~�s�����䆚>@�S�ƑYm#���*"